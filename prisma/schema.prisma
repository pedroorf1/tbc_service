// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema
//cmds
//npx prisma generate
//npx prisma db push


generator client {
  provider = "prisma-client-js"
  output   = "../src/generated/client"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

//USUERS
model User {
  id                BigInt    @id @default(autoincrement())
  email             String @unique
  password          String 
  perfil            Perfil? @relation("perfil")
  address           Address[] @relation("address")
  contact           Contact[] @relation("contact")
  degree            Degree[] @relation("degree")  
  skills            Skills[] @relation("skills")  
  experiences       Experiences[] @relation("experiences")  
  projects          Projects[] @relation("projects")  
  referecePrices    ReferecePrices[] @relation("referecePrices")  
  refereces         Refereces[] @relation("refereces")  
  userPoints        UserPoints[] @relation("userPoints")  
  feeds             Posts[] @relation("posts")  
  comments          FeedComments[] @relation("comment")
  createdAt         DateTime @default(now())
  updatedAt         DateTime? @updatedAt  
}

model Perfil {
  id          BigInt     @id @default(autoincrement())
  photo       String?
  name        String?
  secondname  String?
  socialname  String?
  birthday    DateTime?
  userId      BigInt? @unique
  user        User? @relation("perfil", fields: [userId], references: [id])
  createdAt   DateTime @default(now())
  updatedAt   DateTime? @updatedAt  
}

model Address {
  id              BigInt     @id @default(autoincrement())
  street          String?
  number          String?
  complement      String?
  city            String?
  state           String?
  country         String?
  userId          BigInt?
  user            User? @relation("address",fields: [userId], references: [id])
  createdAt       DateTime @default(now())
  updatedAt       DateTime? @updatedAt  
}

model Contact {
  id          BigInt     @id @default(autoincrement())
  email       String?
  phone       String?
  another     String?
  userId      BigInt?
  user        User? @relation("contact",fields: [userId], references: [id])
  createdAt   DateTime @default(now())
  updatedAt   DateTime? @updatedAt  
}


//SKILLS
model Knowledgespace {
  id          BigInt     @id @default(autoincrement())
  code        String?
  description String?
  degree      Degree[] @relation("degree") 
  createdAt   DateTime @default(now())
  updatedAt   DateTime? @updatedAt  
}

model Degree {
  id                    BigInt     @id @default(autoincrement())
  code                  String?
  description           String?
  KnowledgespaceId      BigInt? @unique
  Knowledgespace        Knowledgespace? @relation("degree", fields: [KnowledgespaceId], references: [id])
  userId                BigInt? @unique
  user                  User? @relation("degree", fields: [userId], references: [id])
  createdAt             DateTime @default(now())
  updatedAt             DateTime? @updatedAt  
}

model Skills {
  id          BigInt     @id @default(autoincrement())
  code        String?
  description String?
  userId      BigInt?
  user        User? @relation("skills",fields: [userId], references: [id])
  createdAt   DateTime @default(now())
  updatedAt   DateTime? @updatedAt  
}

model Experiences {
  id          BigInt     @id @default(autoincrement())
  company     String
  start       DateTime
  end         DateTime?
  iscurrent   Boolean?
  userId      BigInt?
  user        User? @relation("experiences",fields: [userId], references: [id])
  createdAt   DateTime @default(now())
  updatedAt   DateTime? @updatedAt  
}

model Projects {
  id          BigInt     @id @default(autoincrement())
  name        String
  description String?
  start       DateTime
  end         DateTime?
  iscurrent   Boolean?
  userId      BigInt?
  user        User? @relation("projects",fields: [userId], references: [id])
  createdAt   DateTime @default(now())
  updatedAt   DateTime? @updatedAt  
}

model Refereces {
  id          BigInt     @id @default(autoincrement())
  description String
  value       Float
  userId      BigInt?
  user        User? @relation("refereces",fields: [userId], references: [id])
  createdAt   DateTime @default(now())
  updatedAt   DateTime? @updatedAt  
}

model ReferecePrices {
  id          BigInt     @id @default(autoincrement())
  name        String
  description String
  contacts    String
  userId      BigInt?
  user        User? @relation("referecePrices",fields: [userId], references: [id])
  createdAt   DateTime @default(now())
  updatedAt   DateTime? @updatedAt  
}

model UserPoints {
  id          BigInt     @id @default(autoincrement())
  value       BigInt
  userId      BigInt?
  user        User? @relation("userPoints",fields: [userId], references: [id])
  createdAt   DateTime @default(now())
  updatedAt   DateTime? @updatedAt  
}


model Posts {
  id              BigInt     @id @default(autoincrement())
  title           String
  img             String?
  description     String?
  react_positive  BigInt?
  react_negative  BigInt?
  react_smile     BigInt?
  react_lovely    BigInt?
  userId          BigInt?
  user            User? @relation("posts",fields: [userId], references: [id])
  createdAt       DateTime @default(now())
  updatedAt       DateTime? @updatedAt  
}

model FeedComments {
  id              BigInt     @id @default(autoincrement())
  comment         String
  userId          BigInt
  user            User? @relation("comment",fields: [userId], references: [id])
  createdAt       DateTime @default(now())
  updatedAt       DateTime? @updatedAt  
}

